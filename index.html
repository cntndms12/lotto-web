<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì˜¤ëŠ˜ì˜ ë¡œë˜ & ìš´ì„¸</title>
</head>
<body style="text-align:center;font-family:sans-serif;">
<h1 style="font-size:40px;">ğŸ° ë¡œë˜ ë²ˆí˜¸ (ì—­ëŒ€ ë¹ˆë„ ê¸°ì¤€)</h1>
<button style="font-size:28px;padding:15px 30px;" onclick="generate()">ë²ˆí˜¸ ìƒì„±</button>
<h2 id="result" style="font-size:32px;"></h2>

<h1 style="font-size:36px;">ğŸ”® ì˜¤ëŠ˜ì˜ ìš´ì„¸</h1>
<button style="font-size:26px;padding:12px 28px;" onclick="fortune()">ìš´ì„¸ ë³´ê¸°</button>
<p id="fortune" style="font-size:28px;"></p>

<button onclick="getLottoFromServer()">í†µê³„ ê¸°ë°˜ ë²ˆí˜¸</button>
<h2 id="serverResult"></h2>


<script>
// ì—­ëŒ€ ë§ì´ ë‚˜ì˜¨ ë²ˆí˜¸ë“¤ ì˜ˆì‹œ (í†µê³„ ê¸°ë°˜)
const frequentNums = [34, 12, 13, 27, 18, 33, 40, 37, 7, 6, 1, 4];

function generate() {
    let nums = [];
    let pool = frequentNums.slice(); // ì‚¬ë³¸ ìƒì„±
    while (nums.length < 6 && pool.length > 0) {
        // ëœë¤ìœ¼ë¡œ ë½‘ì•„ 6ê°œ ìƒì„±
        let idx = Math.floor(Math.random() * pool.length);
        nums.push(pool[idx]);
        pool.splice(idx, 1);
    }
    nums.sort((a,b)=>a-b);
    document.getElementById("result").innerText = nums.join(", ");
}

const fortunes = [
 "ì˜¤ëŠ˜ì€ ì¢‹ì€ ê¸°ìš´ì´ ìˆìŠµë‹ˆë‹¤ ğŸ€",
 "ì‚¬ëŒ ë§Œë‚˜ëŠ” ë³µì´ ìˆëŠ” ë‚ ì…ë‹ˆë‹¤",
 "ì‘ì€ ê¸°ì¨ì´ ì—¬ëŸ¬ ë²ˆ ìƒê²¨ìš”",
 "ê¸°ë‹¤ë¦¬ë˜ ì†Œì‹ì´ ì˜¬ ìˆ˜ ìˆì–´ìš”",
 "ë¬´ë¦¬í•˜ì§€ ë§ê³  ì²œì²œíˆ ê°€ì„¸ìš”",
 "ì›ƒì„ ì¼ì´ ìƒê¹ë‹ˆë‹¤ ğŸ˜„",
 "ê¸ˆì „ìš´ì€ í‰ë²”, ë§ˆìŒìš´ì€ ì¢‹ìŒ",
 "ëª¸ ì¢€ ì‰¬ì–´ ì£¼ì„¸ìš”",
 "ì¢‹ì€ ìƒê°ì´ ë– ì˜¤ë¦…ë‹ˆë‹¤",
 "ì—„ë§ˆ,ì•„ë¹  ì‚¬ë‘í•´ìš© â¤ï¸ğŸ’•"
];

function fortune() {
    let f = fortunes[Math.floor(Math.random() * fortunes.length)];
    document.getElementById("fortune").innerText = f;
}

async function getLottoFromServer() {
    const resultEl = document.getElementById("serverResult");
    resultEl.innerText = "â³ ë¡œë”© ì¤‘â€¦ ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”";

    try {
        const res = await fetch("/.netlify/functions/lottoStats");
        if (!res.ok) throw new Error("ì„œë²„ ì˜¤ë¥˜");

        const data = await res.json();
        resultEl.innerText = "ğŸ¯ í†µê³„ ê¸°ë°˜ ë²ˆí˜¸: " + data.numbers.join(", ");
    } catch (err) {
        console.error(err);
        resultEl.innerText = "âŒ ë²ˆí˜¸ë¥¼ ê°€ì ¸ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ë‚˜ì¤‘ì— ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”.";
    }
}

// ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ì—°ê²°
document.getElementById("serverBtn").addEventListener("click", getLottoFromServer);
</script>
</body>
</html>
